<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>unix中一些io基础 | Bowser&#39;s blog | 一切像你，一切像我</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="Linux">
    <meta name="description" content="Linux文件描述符相关">
<meta name="keywords" content="Linux">
<meta property="og:type" content="article">
<meta property="og:title" content="unix中一些io基础">
<meta property="og:url" content="/2019/08/03/unixIO/index.html">
<meta property="og:site_name" content="Bowser&#39;s blog">
<meta property="og:description" content="Linux文件描述符相关">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://bowserblog.oss-cn-hangzhou.aliyuncs.com/113418861-593aafc8a9744_articlex.png">
<meta property="og:image" content="https://bowserblog.oss-cn-hangzhou.aliyuncs.com/2974023913-593aafdfac773_articlex.png">
<meta property="og:image" content="https://bowserblog.oss-cn-hangzhou.aliyuncs.com/2289371477-593aaff35bc21_articlex.png">
<meta property="og:image" content="https://bowserblog.oss-cn-hangzhou.aliyuncs.com/2019-07-22%2014-43-26%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png">
<meta property="og:image" content="http://cs.ucla.edu/classes/fall08/cs111/scribe/4/FDT_diagram.JPG">
<meta property="og:image" content="http://academic.udayton.edu/SaverioPerugini/courses/cps346/lecture_notes/images/beforeredir.png">
<meta property="og:image" content="http://academic.udayton.edu/SaverioPerugini/courses/cps346/lecture_notes/images/afterredir.png">
<meta property="og:updated_time" content="2019-08-20T03:19:53.667Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="unix中一些io基础">
<meta name="twitter:description" content="Linux文件描述符相关">
<meta name="twitter:image" content="https://bowserblog.oss-cn-hangzhou.aliyuncs.com/113418861-593aafc8a9744_articlex.png">
    
        <link rel="alternate" type="application/atom+xml" title="Bowser&#39;s blog" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="https://avatars2.githubusercontent.com/u/43539191?s=460&v=4" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpeg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Bowser</h5>
          <a href="mailto:yuqlang@163.com" title="yuqlang@163.com" class="mail">yuqlang@163.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/Bowser1704" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://www.weibo.com/Bowser1704" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://www.douban.com/people/153160581/"  >
                <i class="icon icon-lg icon-link"></i>
                豆瓣
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">unix中一些io基础</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">unix中一些io基础</h1>
        <h5 class="subtitle">
            
                <time datetime="2019-08-03T09:10:17.000Z" itemprop="datePublished" class="page-time">
  2019-08-03
</time>


            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#文件描述符"><span class="post-toc-number">1.</span> <span class="post-toc-text">文件描述符</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-维基百科概要"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">1.维基百科概要</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-文件描述符"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">2.文件描述符</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#PS"><span class="post-toc-number">1.2.1.</span> <span class="post-toc-text">PS:</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#三张表"><span class="post-toc-number">1.2.2.</span> <span class="post-toc-text">三张表</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#三张表的联系"><span class="post-toc-number">1.2.3.</span> <span class="post-toc-text">三张表的联系</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#通过命令限制文件描述符"><span class="post-toc-number">1.2.4.</span> <span class="post-toc-text">通过命令限制文件描述符</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-查看某个进程的文件描述符"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">3.查看某个进程的文件描述符</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-使用场景"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">4. 使用场景</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#I-O重定向"><span class="post-toc-number">2.</span> <span class="post-toc-text">I/O重定向</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#dup2"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">dup2()</span></a></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-unixIO"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">unix中一些io基础</h1>
        <div class="post-meta">
            <time class="post-time" title="2019-08-03 17:10:17" datetime="2019-08-03T09:10:17.000Z"  itemprop="datePublished">2019-08-03</time>

            


            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <p>Linux文件描述符相关</p>
<a id="more"></a>

<h3 id="文件描述符"><a href="#文件描述符" class="headerlink" title="文件描述符"></a>文件描述符</h3><p>在Linux通用I/O模型中，I/O操作系列函数(系统调用)都是围绕一个叫做文件描述符的整数展开。这不禁让人产生疑问：这个整数代表什么？一个数值代表一个文件吗？随便传一个整数进去调用可以吗？</p>
<h4 id="1-维基百科概要"><a href="#1-维基百科概要" class="headerlink" title="1.维基百科概要"></a>1.维基百科概要</h4><blockquote>
<p>文件描述符在形式上是一个非负整数。实际上，它是一个索引值，指向内核为每一个进程所维护的该进程打开文件的记录表。当程序打开一个现有文件或者创建一个新文件时，内核向进程返回一个文件描述符。在程序设计中，一些涉及底层的程序编写往往会围绕着文件描述符展开。但是文件描述符这一概念往往只适用于UNIX、Linux这样的操作系统。</p>
</blockquote>
<h4 id="2-文件描述符"><a href="#2-文件描述符" class="headerlink" title="2.文件描述符"></a>2.文件描述符</h4><h5 id="PS"><a href="#PS" class="headerlink" title="PS:"></a>PS:</h5><ul>
<li>每个文件描述符对应一个文件,单向对应.</li>
<li>不同文件描述符可能指向同一个文件.</li>
<li>相同的文件可以在不同的进程中打开,也可以在一个进程中重复打开.</li>
</ul>
<h5 id="三张表"><a href="#三张表" class="headerlink" title="三张表"></a>三张表</h5><ul>
<li><p>进程级文件描述符表(file descriptor table)</p>
</li>
<li><p>系统级打开文件表(open file table)</p>
</li>
<li><p>文件系统i-node/v-node表(i-node table)</p>
<p><strong>i-node与v-node</strong></p>
<blockquote>
<p>传统的Unix中既有v-node,也有i-node,v-node数据结构中包含了i-node的信息,但在Linux中没有使用v-node，而使用了通用i-node。“实现虽不同，但在概念上是一样的。” v-node (“virtual node”)仅在文件打开的时候，才出现的；而i-node定位文件在磁盘的位置，它的信息本身是存储在磁盘等上的，当打开文件的时候从磁盘上读入内存。</p>
<p>很简单区分,其实还有很多区别.</p>
</blockquote>
<p><a href="http://www.ruanyifeng.com/blog/2011/12/inode.html" target="_blank" rel="noopener">阮一峰理解inode</a></p>
</li>
</ul>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://bowserblog.oss-cn-hangzhou.aliyuncs.com/113418861-593aafc8a9744_articlex.png" alt="三张表" title>
                </div>
                <div class="image-caption">三张表</div>
            </figure>

<h5 id="三张表的联系"><a href="#三张表的联系" class="headerlink" title="三张表的联系"></a>三张表的联系</h5><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://bowserblog.oss-cn-hangzhou.aliyuncs.com/2974023913-593aafdfac773_articlex.png" alt="img" title>
                </div>
                <div class="image-caption">img</div>
            </figure>

<ul>
<li>进程A中文件描述符1和30指向同一个打开的文件23, 这可能是同一个进程对于多个文件同时打开的结果</li>
<li>进程A中文件描述符和进程B中的文件描述符2都指向文件73,有几种可能<ul>
<li>进程A与进程B是父子关系</li>
<li>进程A和进程B打开了同一个文件,刚好是同一个文件描述符</li>
<li>进程A或进程B通过socket将文件描述符传递了</li>
</ul>
</li>
</ul>
<h5 id="通过命令限制文件描述符"><a href="#通过命令限制文件描述符" class="headerlink" title="通过命令限制文件描述符"></a>通过命令限制文件描述符</h5><ul>
<li><p><code>ulimit</code></p>
<p><code>ulimit</code>命令用来限制系统用户对shell资源的访问。</p>
<blockquote>
<p>假设有这样一种情况，当一台 Linux 主机上同时登陆了 10 个人，在系统资源无限制的情况下，这 10 个用户同时打开了 500 个文档，而假设每个文档的大小有 <code>10M</code>，这时系统的内存资源就会受到巨大的挑战。</p>
<p>而实际应用的环境要比这种假设复杂的多，例如在一个嵌入式开发环境中，各方面的资源都是非常紧缺的，对于开启文件描述符的数量，分配堆栈的大 小，CPU 时间，虚拟内存大小，等等，都有非常严格的要求。资源的合理限制和分配，不仅仅是保证系统可用性的必要条件，也与系统上软件运行的性能有着密不可分的联 系。这时，<code>ulimit</code> 可以起到很大的作用，它是一种简单并且有效的实现资源限制的方式。</p>
</blockquote>
<p><code>ulimit</code> 用于限制 shell 启动进程所占用的资源，支持以下各种类型的限制：所创建的内核文件的大小、进程数据块的大小、Shell 进程创建文件的大小、内存锁住的大小、常驻内存集的大小、<code>打开文件描述符的数量</code>、分配堆栈的最大大小、CPU 时间、单个用户的最大线程数、Shell 进程所能使用的最大虚拟内存。同时，它支持硬资源和软资源的限制。</p>
<p>作为临时限制，<code>ulimit</code> 可以作用于通过使用其命令登录的 shell 会话，在会话终止时便结束限制，并不影响于其他 shell 会话。而对于长期的固定限制，<code>ulimit</code> 命令语句又可以被添加到由登录 shell 读取的文件中，作用于特定的 shell 用户。</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ulimit(选项)			<span class="meta">#语法-a：显示目前资源限制的设定；-c <span class="meta-string">&lt;core文件上限&gt;</span>：设定core文件的最大值，单位为区块；-d <span class="meta-string">&lt;数据节区大小&gt;</span>：程序数据节区的最大值，单位为KB；-f <span class="meta-string">&lt;文件大小&gt;</span>：shell所能建立的最大文件，单位为区块；-H：设定资源的硬性限制，也就是管理员所设下的限制；-m <span class="meta-string">&lt;内存大小&gt;</span>：指定可使用内存的上限，单位为KB；-n <span class="meta-string">&lt;文件数目&gt;</span>：指定同一时间最多可开启的文件数；-p <span class="meta-string">&lt;缓冲区大小&gt;</span>：指定管道缓冲区的大小，单位512字节；-s <span class="meta-string">&lt;堆叠大小&gt;</span>：指定堆叠的上限，单位为KB；-S：设定资源的弹性限制；-t <span class="meta-string">&lt;CPU时间&gt;</span>：指定CPU使用时间的上限，单位为秒；-u <span class="meta-string">&lt;程序数目&gt;</span>：用户最多可开启的程序数目；-v <span class="meta-string">&lt;虚拟内存大小&gt;</span>：指定可使用的虚拟内存上限，单位为KB。</span></span><br></pre></td></tr></table></figure>

<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-attr">[root@localhost ~]</span># <span class="selector-tag">ulimit</span> <span class="selector-tag">-acore</span> <span class="selector-tag">file</span> <span class="selector-tag">size</span>          		(blocks, -c) <span class="selector-tag">0</span>           <span class="selector-id">#core</span>文件的最大值为<span class="selector-tag">100</span> <span class="selector-tag">blocks</span>。<span class="selector-tag">data</span> <span class="selector-tag">seg</span> <span class="selector-tag">size</span>           	(kbytes, -d) <span class="selector-tag">unlimited</span>   #进程的数据段可以任意大。<span class="selector-tag">scheduling</span> <span class="selector-tag">priority</span>             (-e) <span class="selector-tag">0file</span> <span class="selector-tag">size</span>               			(blocks, -f) <span class="selector-tag">unlimited</span>   #文件可以任意大。<span class="selector-tag">pending</span> <span class="selector-tag">signals</span>                 (-i) <span class="selector-tag">98304</span>       #最多有<span class="selector-tag">98304</span>个待处理的信号。<span class="selector-tag">max</span> <span class="selector-tag">locked</span> <span class="selector-tag">memory</span>       (kbytes, -l) <span class="selector-tag">32</span>          #一个任务锁住的物理内存的最大值为<span class="selector-tag">32KB</span>。<span class="selector-tag">max</span> <span class="selector-tag">memory</span> <span class="selector-tag">size</span>         (kbytes, -m) <span class="selector-tag">unlimited</span>   #一个任务的常驻物理内存的最大值。<span class="selector-tag">open</span> <span class="selector-tag">files</span>                      (-n) <span class="selector-tag">1024</span>        #一个任务最多可以同时打开<span class="selector-tag">1024</span>的文件。<span class="selector-tag">pipe</span> <span class="selector-tag">size</span>            (<span class="number">512</span> bytes, -p) <span class="selector-tag">8</span>           #管道的最大空间为<span class="selector-tag">4096</span>字节。<span class="selector-tag">POSIX</span> <span class="selector-tag">message</span> <span class="selector-tag">queues</span>     (bytes, -q) <span class="selector-tag">819200</span>      <span class="selector-id">#POSIX</span>的消息队列的最大值为<span class="selector-tag">819200</span>字节。<span class="selector-tag">real-time</span> <span class="selector-tag">priority</span>              (-r) <span class="selector-tag">0stack</span> <span class="selector-tag">size</span>              (kbytes, -s) <span class="selector-tag">10240</span>       #进程的栈的最大值为<span class="selector-tag">10240</span>字节。<span class="selector-tag">cpu</span> <span class="selector-tag">time</span>               (seconds, -t) <span class="selector-tag">unlimited</span>   #进程使用的<span class="selector-tag">CPU</span>时间。<span class="selector-tag">max</span> <span class="selector-tag">user</span> <span class="selector-tag">processes</span>              (-u) <span class="selector-tag">98304</span>       #当前用户同时打开的进程（包括线程）的最大个数为<span class="selector-tag">98304</span>。<span class="selector-tag">virtual</span> <span class="selector-tag">memory</span>          (kbytes, -v) <span class="selector-tag">unlimited</span>   #没有限制进程的最大地址空间。<span class="selector-tag">file</span> <span class="selector-tag">locks</span>                      (-x) <span class="selector-tag">unlimited</span>   #所能锁住的文件的最大个数没有限制。</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>sysctl</code></p>
<p><code>sysctl</code>命令被用于在内核运行时动态地修改内核的运行参数，可用的内核参数在目录<code>/proc/sys</code>中。它包含一些<code>TCP/ip</code>堆栈和虚拟内存系统的高级选项， 这可以让有经验的管理员提高引人注目的系统性能。用<code>sysctl</code>可以读取设置超过五百个系统变量。</p>
<figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#语法#sysctl(选项)(参数)#选项-n：打印值时不打印关键字；-e：忽略未知关键字错误；-N：仅打印名称；-w：当改变sysctl设置时使用此项；-p：从配置文件“/etc/sysctl.conf”加载内核参数设置；-a：打印当前所有可用的内核参数变量和值；-A：以表格方式打印当前所有可用的内核参数变量和值。#命令sysctl kern.maxfiles=<span class="number">5000</span>	#直接改变kern.maxfiles: <span class="number">2088</span> -&gt; <span class="number">5000</span></span><br></pre></td></tr></table></figure>

<p><a href="http://man.linuxde.net/sysctl" target="_blank" rel="noopener">sysctl</a></p>
<p><img src="https://bowserblog.oss-cn-hangzhou.aliyuncs.com/2289371477-593aaff35bc21_articlex.png" alt="img"></p>
</li>
</ul>
<h4 id="3-查看某个进程的文件描述符"><a href="#3-查看某个进程的文件描述符" class="headerlink" title="3.查看某个进程的文件描述符"></a>3.查看某个进程的文件描述符</h4><ol>
<li><p>找到要查看的进程的<code>pid</code></p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ps</span> -aux | <span class="keyword">grep</span> mysql</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看limits</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat <span class="meta-keyword">/proc/</span><span class="params">&lt;pid&gt;</span>/limits	<span class="meta">#pid自己填入</span></span><br></pre></td></tr></table></figure>

<p><img src="https://bowserblog.oss-cn-hangzhou.aliyuncs.com/2019-07-22%2014-43-26%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png" alt="img"></p>
</li>
<li><p>其实就是在<code>/proc/</code>目录下每个进程都有自己的文件信息.</p>
</li>
</ol>
<h4 id="4-使用场景"><a href="#4-使用场景" class="headerlink" title="4. 使用场景"></a>4. 使用场景</h4><p>运行程序过程中，如果没有记得使用完后关闭文件，就像ｃ中忘记free一样危险, 可能会出现“Too many open files”,导致程序崩溃,一定要记住, <strong>无论什么资源, 申请调用后一定要还回去(释放)</strong>.</p>
<h3 id="I-O重定向"><a href="#I-O重定向" class="headerlink" title="I/O重定向"></a>I/O重定向</h3><p>Unix中为每一个新建立的进程会自动创建三个文件描述符(file descriptor)</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://cs.ucla.edu/classes/fall08/cs111/scribe/4/FDT_diagram.JPG" alt="img" title>
                </div>
                <div class="image-caption">img</div>
            </figure>

<p>所谓的IO重定向也就是让已知的/已创建的FD指向其他文件,例如下面对1(standard input)重定向到一个文件<code>testfile.txt</code></p>
<p>before</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://academic.udayton.edu/SaverioPerugini/courses/cps346/lecture_notes/images/beforeredir.png" alt="img" title>
                </div>
                <div class="image-caption">img</div>
            </figure>

<p>after</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://academic.udayton.edu/SaverioPerugini/courses/cps346/lecture_notes/images/afterredir.png" alt="img" title>
                </div>
                <div class="image-caption">img</div>
            </figure>

<p>在IO重定向中,FD 0/1/2文件描述符标志是不变的,但是我们可以改变的是文件指针所指向的位置.例如由<code>STDOUT</code>指向<code>testfile.txt</code>.</p>
<p>程序关心的也只是文件描述符, 一般标准IO函数指向的都是FD 0/1/2, 但是不管他重定向到了哪里.</p>
<h4 id="dup2"><a href="#dup2" class="headerlink" title="dup2()"></a><code>dup2()</code></h4><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span>int dup2(int oldfd, int newfd);</span></span><br></pre></td></tr></table></figure>

<p><code>dup2()</code>是一个系统级函数，用来重定向．</p>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2019-08-20T03:19:53.667Z" itemprop="dateUpdated">2019-08-20 11:19:53</time>
</span><br>


        
        <a href="/2019/08/03/unixIO/" target="_blank" rel="external">/2019/08/03/unixIO/</a>
        
    </div>
    
    <footer>
        <a href="">
            <img src="/img/avatar.jpeg" alt="Bowser">
            Bowser
        </a>
    </footer>
</blockquote>

        


        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=/2019/08/03/unixIO/&title=《unix中一些io基础》 — Bowser's blog&pic=/img/avatar.jpeg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=/2019/08/03/unixIO/&title=《unix中一些io基础》 — Bowser's blog&source=Linux文件描述符相关" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=/2019/08/03/unixIO/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《unix中一些io基础》 — Bowser's blog&url=/2019/08/03/unixIO/&via=" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=/2019/08/03/unixIO/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2019/08/03/ubuntuInstall/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">记录一次重装系统</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2019/08/03/influxDB/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">influxDB</h4>
      </a>
    </div>
  
</nav>



    




















</article>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>博客内容遵循 <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Bowser &copy; 2019</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=/2019/08/03/unixIO/&title=《unix中一些io基础》 — Bowser's blog&pic=/img/avatar.jpeg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=/2019/08/03/unixIO/&title=《unix中一些io基础》 — Bowser's blog&source=Linux文件描述符相关" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=/2019/08/03/unixIO/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《unix中一些io基础》 — Bowser's blog&url=/2019/08/03/unixIO/&via=" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=/2019/08/03/unixIO/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="//api.qrserver.com/v1/create-qr-code/?data=/2019/08/03/unixIO/" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: false };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = '死鬼去哪里了！';
            clearTimeout(titleTime);
        } else {
            document.title = '(つェ⊂)咦!又好了!';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



</body>
</html>
