<!DOCTYPE html>
<html lang="zh-CN"><meta charset="utf-8">
<meta name="HandheldFriendly" content="True">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name="referrer" content="no-referrer">
<meta name="renderer" content="webkit">
<meta name="force-rendering" content="webkit">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="no-transform">
<meta name="format-detection" content="telephone=no,email=no,address=no">
<meta name="generator" content="Hugo 0.70.0" />


<title>在 k3s 内使用 cert-manager 管理证书 - Bowser</title>


<link rel="stylesheet" href="/css/style.css">

<link href="https://fonts.googleapis.com/css?family=Noto+Serif+SC:400,700&display=swap&subset=chinese-simplified" rel="stylesheet" />
<link rel="canonical" href="https://bowser1704.github.io/blog/20200625-%E5%9C%A8-k3s-%E5%86%85%E4%BD%BF%E7%94%A8-cert-manager-%E7%AE%A1%E7%90%86%E8%AF%81%E4%B9%A6/">
<link rel="shortcut icon" href="/favicon.jpg">

<meta itemprop="name" content="在 k3s 内使用 cert-manager 管理证书">
<meta itemprop="description" content="“云原生使用 acme.sh 有一些无法很好解决的问题，所以使用 cert-manager 管理证书&rdquo;">
<meta itemprop="datePublished" content="2020-06-25T19:30:20&#43;08:00" />
<meta itemprop="dateModified" content="2020-06-25T19:30:20&#43;08:00" />
<meta itemprop="wordCount" content="1315">



<meta itemprop="keywords" content="k3s,cert-manager," />
<meta property="og:title" content="在 k3s 内使用 cert-manager 管理证书" />
<meta property="og:description" content="“云原生使用 acme.sh 有一些无法很好解决的问题，所以使用 cert-manager 管理证书&rdquo;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bowser1704.github.io/blog/20200625-%E5%9C%A8-k3s-%E5%86%85%E4%BD%BF%E7%94%A8-cert-manager-%E7%AE%A1%E7%90%86%E8%AF%81%E4%B9%A6/" />
<meta property="article:published_time" content="2020-06-25T19:30:20+08:00" />
<meta property="article:modified_time" content="2020-06-25T19:30:20+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="在 k3s 内使用 cert-manager 管理证书"/>
<meta name="twitter:description" content="“云原生使用 acme.sh 有一些无法很好解决的问题，所以使用 cert-manager 管理证书&rdquo;"/>
<body class="font-sans">
    <div class="flex flex-col md:flex-row md:w-4/5 mx-auto py-5 min-h-screen">
<header
    class="flex flex-col relative border-black border-b-4 md:border-b-0 md:border-r-2 pb-6 mx-4 md:mx-0 md:w-1/5 md:text-right md:pr-8 bg-white md:text-center">
    <link rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/vs.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
    <div>
        <h1 id="header_logo" class="text-3xl md:my-12 mt-4 md:mb-12"><a href="https://bowser1704.github.io">Bowser</a></h1>
        <p class="font-thin italic">There is no dark side of the Moon. It&#39;s all dark, really.</p>
    </div>
    <input id="menu-check" type="checkbox" class="hidden" />
    <label id="menu-label" for="menu-check"
        class="absolute right-0 text-right md:hidden  inline-block py-4 h-12 cursor-pointer mt-10 text-xl text-gray-900">
        <span class="icon close-icon">✕</span>
        <span class="icon open-icon">☰</span>
        <span class="text">MENU</span>
    </label>
    <nav id="menu" class="my-2 w-full md:flex-row-reverse hidden md:block">
        <ul class="list-none pl-0 mx-auto justify-center  max-w-xs">
            
            
            <li class="my-4 border-black text-center md:text-right border-b-2 md:border-none pb-1">
                <a class="py-4 md:border-black md:border-b-2  md:pb-1" href="/blog/">博客</a>
            </li>
            
            <li class="my-4 border-black text-center md:text-right border-b-2 md:border-none pb-1">
                <a class="py-4 md:border-black md:border-b-2  md:pb-1" href="/note/">笔记</a>
            </li>
            
            <li class="my-4 border-black text-center md:text-right border-b-2 md:border-none pb-1">
                <a class="py-4 md:border-black md:border-b-2  md:pb-1" href="/about/">关于</a>
            </li>
            
        </ul>
    </nav>
</header>
<main class="flex-1 p-4 ">
<article itemscope itemtype="http://schema.org/Article" class="max-w-3xl mx-auto leading-relaxed">
    <header class="flex flex-col meta">
<div class="flex flex-col md:flex-row justify-between ">
    
    <ul class="flex justify-end text-gray-800" itemprop="articleSection">
        
        <li class="pl-2 pr-0 md:pl-0 md:pr-2">
            <a href="/categories/cloud-native" rel="category">cloud-native</a>
        </li>
        
    </ul>
    
    
    <ul class="flex justify-end text-gray-700">
        
        <li itemprop="keywords" class="pl-2 md:pl-4">
            <a href="https://bowser1704.github.io/tags/k3s/">#k3s</a>
        </li>
        
        <li itemprop="keywords" class="pl-2 md:pl-4">
            <a href="https://bowser1704.github.io/tags/cert-manager/">#cert-manager</a>
        </li>
        
    </ul>
    
</div>
<h1 itemprop="name" class="text-center text-4xl my-4 md:my-6">在 k3s 内使用 cert-manager 管理证书</h1>
        
        <h3 class="text-center text-2xl">
            
            <span itemprop="author" itemscope itemtype="http://schema.org/Person">
                <span itemprop="name">Bowser</span>
                
                
                 / 
                <span itemprop="datePublished"
                    content="2020-06-25">2020-06-25</span>
                
        </h3>
        
    </header>
    <hr class="block my-10 mx-auto max-w-xs h-px border-t border-black">
    <div itemprop="articleBody" class="content markdown">
        <h2 id="acmesh-vs-cert-manager">acme.sh vs cert-manager</h2>
<p>两者的区别就是普通 acme 客户端与 cloudnative acme 客户端，acme.sh 可以很好的更新证书，但是在集群里面我们 cert 使用的是 secret 目前没有办法能够自动更新 secret 所以 cert 更新还是没有用，还是要手动去修改。</p>
<p>但是 cert-manager 作为一个 operator 可以定时更新 secret 并且 作为一个 acme.sh 客户端。实现了 acme 协议 以及 云原生更新证书的办法。</p>
<p>



    <img class="mx-auto" alt="High level overview diagram explaining cert-manager architecture" src="https://cert-manager.io/images/high-level-overview.svg" />
</p>
<p>简单讲一下 cert-manager 的原理，普通 acme.sh 客户端交付给我们的是证书，附带的功能也是更新证书，但是 cert-manager 交付给我们的是 一个 CRD Issuer/ClusterIssuer 这个对象可以用来签发  另一个 CRD <a href="https://cert-manager.io/docs/concepts/certificate/">Certificate</a> 会自动生成 tls secret 并且管理更新。Certificate 就是真正的证书，由他来生产 secret。</p>
<h2 id="使用-cert-manager">使用 cert-manager</h2>
<p>普通使用 Helm 安装。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># step1 添加仓库</span>
$ helm repo add jetstack https://charts.jetstack.io <span style="color:#f92672">&amp;&amp;</span> helm repo update

<span style="color:#75715e"># step2 创建 ns</span>
$ kubectl create namespace cert-manager

<span style="color:#75715e"># step3 创建 CRD</span>
<span style="color:#75715e"># Kubernetes 1.15+ yaml 文件在 [GitHub官方主页](https://github.com/jetstack/cert-manager) 下载</span>
<span style="color:#75715e">#$ kubectl apply --validate=false -f cert-manager.crds.yaml</span>
$ kubectl apply --validate<span style="color:#f92672">=</span>false -f https://github.com/jetstack/cert-manager/releases/download/v0.15.1/cert-manager.yaml


<span style="color:#75715e"># step4 使用 HelmChart 安装 cert-manager 或者直接 Helm 安装。</span>
<span style="color:#75715e"># Helm v3+</span>
$ helm install <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  cert-manager jetstack/cert-manager <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  --namespace cert-manager <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  --version v0.15.1 <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  <span style="color:#75715e"># --set installCRDs=true</span>

<span style="color:#75715e"># Helm v2</span>
$ helm install <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  --name cert-manager <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  --namespace cert-manager <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  --version v0.15.1 <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  jetstack/cert-manager <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  <span style="color:#75715e"># --set installCRDs=true</span>
</code></pre></div><p>使用 k3s 提供的 HelmChart 安装</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#66d9ef">apiVersion</span>: helm.cattle.io/v1
<span style="color:#66d9ef">kind</span>: HelmChart
<span style="color:#66d9ef">metadata</span>:
  <span style="color:#66d9ef">name</span>: cert-manager
  <span style="color:#66d9ef">namespace</span>: cert-manager
<span style="color:#66d9ef">spec</span>:
	<span style="color:#66d9ef">helmVersion</span>: v3
  <span style="color:#66d9ef">chart</span>: cert-manager
  <span style="color:#66d9ef">targetNamespace</span>: cert-manager
  <span style="color:#66d9ef">version</span>: v0<span style="color:#ae81ff">.15.1</span> 
  <span style="color:#66d9ef">repo</span>: https://charts.jetstack.io
</code></pre></div><h3 id="安装完成之后配置">安装完成之后配置</h3>
<ol>
<li>
<p>使用 ClusterIssuer，作用于整个集群。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#66d9ef">apiVersion</span>: cert-manager.io/v1alpha2
<span style="color:#66d9ef">kind</span>: ClusterIssuer
<span style="color:#66d9ef">metadata</span>:
  <span style="color:#66d9ef">name</span>: letsencrypt-prod
<span style="color:#66d9ef">spec</span>:
  <span style="color:#66d9ef">acme</span>:
    <span style="color:#75715e"># server: https://acme-v02.api.letsencrypt.org/directory</span>
    <span style="color:#75715e"># 建议先使用 测试 API，区别参考 https://letsencrypt.org/zh-cn/docs/staging-environment/</span>
    <span style="color:#66d9ef">server</span>: https://acme-staging-v02.api.letsencrypt.org/directory
    <span style="color:#66d9ef">email</span>: name@user.com
    <span style="color:#66d9ef">privateKeySecretRef</span>:
      <span style="color:#66d9ef">name</span>: letsencrypt-prod
    <span style="color:#66d9ef">solvers</span>:
    - <span style="color:#66d9ef">http01</span>:
       <span style="color:#66d9ef">ingress</span>:
         <span style="color:#66d9ef">class</span>: traefik
</code></pre></div><p>可以使用两种检测方式，一种为 <code>HTTP-01</code>、一种为 <code>DNS-01</code>，区别参考<a href="https://letsencrypt.org/zh-cn/docs/challenge-types/">Let’s Encrypt 验证方式</a>。</p>
<p>如果使用 <code>DNS-01</code> 方式，因为原生不支持 AliDNS，所以可以使用 Alidns-<a href="https://github.com/pragkent/alidns-webhook">webhook</a>。</p>
</li>
<li>
<p>ClusterIssuer 创建成功之后，创建 Certificate，针对于特定命名空间的。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#66d9ef">apiVersion</span>: cert-manager.io/v1alpha2
<span style="color:#66d9ef">kind</span>: Certificate
<span style="color:#66d9ef">metadata</span>:
  <span style="color:#66d9ef">name</span>: food
  <span style="color:#66d9ef">namespace</span>: food
<span style="color:#66d9ef">spec</span>:
  <span style="color:#66d9ef">secretName</span>: food-secret
  <span style="color:#66d9ef">dnsNames</span>:
  - food.test.muxixyz.com
  <span style="color:#66d9ef">issuerRef</span>:
    <span style="color:#66d9ef">name</span>: letsencrypt-prod
    <span style="color:#66d9ef">kind</span>: ClusterIssuer
</code></pre></div><p>配置成功之后查看一下 certificate 的状态</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>root@bowser1704 food<span style="color:#f92672">]</span><span style="color:#75715e"># kubectl get certificate -n food</span>
NAME   READY   SECRET        AGE
food   True    food-secret   3h27m
</code></pre></div></li>
<li>
<p>ingress 设置</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#66d9ef">apiVersion</span>: extensions/v1beta1
<span style="color:#66d9ef">kind</span>: Ingress
<span style="color:#66d9ef">metadata</span>:
  <span style="color:#66d9ef">name</span>: food
  <span style="color:#66d9ef">namespace</span>: food
  <span style="color:#66d9ef">annotations</span>:
    <span style="color:#66d9ef">kubernetes.io/ingress.class</span>: traefik
    <span style="color:#75715e"># 添加一个 annotations</span>
    <span style="color:#66d9ef">cert-manager.io/issuer-name</span>: letsencrypt-prod
<span style="color:#66d9ef">spec</span>:
  <span style="color:#66d9ef">rules</span>:
  - <span style="color:#66d9ef">host</span>: food.test.muxixyz.com
    <span style="color:#66d9ef">http</span>:
      <span style="color:#66d9ef">paths</span>:
      - <span style="color:#66d9ef">path</span>: /
        <span style="color:#66d9ef">backend</span>:
          <span style="color:#66d9ef">serviceName</span>: food-backend
          <span style="color:#66d9ef">servicePort</span>: http
  <span style="color:#66d9ef">tls</span>:
  - <span style="color:#66d9ef">hosts</span>:
    - food.test.muxixyz.com
    <span style="color:#75715e"># certificate 里面的 secret-name</span>
    <span style="color:#66d9ef">secretName</span>: food-secret
</code></pre></div><p>大功告成！以后就不会发生证书过期的事情了。</p>
</li>
</ol>
<hr>
<p>出现错误</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Error from server <span style="color:#f92672">(</span>InternalError<span style="color:#f92672">)</span>: error when creating <span style="color:#e6db74">&#34;cluster-issuer.yaml&#34;</span>: Internal error occurred: failed calling webhook <span style="color:#e6db74">&#34;webhook.cert-manager.io&#34;</span>: Post https://cert-manager-webhook.cert-manager.svc:443/mutate?timeout<span style="color:#f92672">=</span>30s: dial tcp 10.43.247.15:443: i/o timeout
</code></pre></div><p>定位错误</p>
<ul>
<li>
<p><a href="https://github.com/jetstack/cert-manager/issues/2811">https://github.com/jetstack/cert-manager/issues/2811</a></p>
<p>猜想是 flannel 的后端 VXLAN 的问题。issue 中暂时解决的办法是重启 k3s 更换 后端。</p>
</li>
<li>
<p><a href="https://github.com/coreos/flannel/issues/1243">https://github.com/coreos/flannel/issues/1243</a></p>
<p><a href="https://github.com/rancher/k3s/issues/1613">https://github.com/rancher/k3s/issues/1613</a></p>
<p>上次其他服务碰到过一次这个问题，也就是说，也是 flannel 的问题。</p>
<p>k3s 默认使用的 flannel + VXLAN 网络。也许我们可以使用 host-gw 作为后端。</p>
</li>
<li>
<p><a href="https://github.com/rancher/k3s/issues/538">https://github.com/rancher/k3s/issues/538</a></p>
</li>
<li>
<p><a href="https://rancher.com/docs/k3s/latest/en/installation/network-options/">https://rancher.com/docs/k3s/latest/en/installation/network-options/</a></p>
<p>可以通过修改 k3s.service 然后使用 <code>systemctl daemon-reload</code> restart k3s。</p>
</li>
</ul>
<p>debug</p>
<ol>
<li>
<p>检查 svc 和 endpoint。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># svc ip</span> 
<span style="color:#f92672">[</span>root@bowser1704 ~<span style="color:#f92672">]</span><span style="color:#75715e"># httpstat -k 10.43.247.15:443</span>
^C
   
<span style="color:#75715e"># endpoint or pod ip</span>
<span style="color:#f92672">[</span>root@bowser1704 ~<span style="color:#f92672">]</span><span style="color:#75715e"># httpstat -k 10.42.1.28:10250</span>
   
Connected to 10.42.1.28:10250
   
HTTP/1.1 <span style="color:#ae81ff">404</span> Not Found
Content-Length: <span style="color:#ae81ff">19</span>
Content-Type: text/plain; charset<span style="color:#f92672">=</span>utf-8
Date: Fri, <span style="color:#ae81ff">26</span> Jun <span style="color:#ae81ff">2020</span> 07:08:51 GMT
X-Content-Type-Options: nosniff
   
Body discarded
   
  DNS Lookup   TCP Connection   TLS Handshake   Server Processing   Content Transfer
<span style="color:#f92672">[</span>      0ms  |           0ms  |         44ms  |              0ms  |             0ms  <span style="color:#f92672">]</span>
            |                |               |                   |                  |
   namelookup:0ms            |               |                   |                  |
                       connect:0ms           |                   |                  |
                                   pretransfer:45ms              |                  |
                                                     starttransfer:45ms             |
                                                                                total:45ms
</code></pre></div><p>定位到是 svc 的问题。发现所有的 svc 都访问不到。</p>
</li>
<li>
<p>检查 iptables</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>root@bowser1704 ~<span style="color:#f92672">]</span><span style="color:#75715e"># iptables-save | grep 10.43.247.15</span>
-A KUBE-SERVICES ! -s 10.42.0.0/16 -d 10.43.247.15/32 -p tcp -m comment --comment <span style="color:#e6db74">&#34;cert-manager/cert-manager-webhook:https cluster IP&#34;</span> -m tcp --dport <span style="color:#ae81ff">443</span> -j KUBE-MARK-MASQ
-A KUBE-SERVICES -d 10.43.247.15/32 -p tcp -m comment --comment <span style="color:#e6db74">&#34;cert-manager/cert-manager-webhook:https cluster IP&#34;</span> -m tcp --dport <span style="color:#ae81ff">443</span> -j KUBE-SVC-ZUD4L6KQKCHD52W4
   
<span style="color:#f92672">[</span>root@bowser1704 ~<span style="color:#f92672">]</span><span style="color:#75715e"># iptables-save | grep KUBE-SVC-ZUD4L6KQKCHD52W4</span>
:KUBE-SVC-ZUD4L6KQKCHD52W4 - <span style="color:#f92672">[</span>0:0<span style="color:#f92672">]</span>
-A KUBE-SERVICES -d 10.43.247.15/32 -p tcp -m comment --comment <span style="color:#e6db74">&#34;cert-manager/cert-manager-webhook:https cluster IP&#34;</span> -m tcp --dport <span style="color:#ae81ff">443</span> -j KUBE-SVC-ZUD4L6KQKCHD52W4
-A KUBE-SVC-ZUD4L6KQKCHD52W4 -j KUBE-SEP-MM5Y2SAJQYJV572E
   
<span style="color:#f92672">[</span>root@bowser1704 ~<span style="color:#f92672">]</span><span style="color:#75715e"># iptables-save | grep KUBE-SEP-MM5Y2SAJQYJV572E</span>
:KUBE-SEP-MM5Y2SAJQYJV572E - <span style="color:#f92672">[</span>0:0<span style="color:#f92672">]</span>
-A KUBE-SEP-MM5Y2SAJQYJV572E -s 10.42.1.28/32 -j KUBE-MARK-MASQ
-A KUBE-SEP-MM5Y2SAJQYJV572E -p tcp -m tcp -j DNAT --to-destination 10.42.1.28:10250
-A KUBE-SVC-ZUD4L6KQKCHD52W4 -j KUBE-SEP-MM5Y2SAJQYJV572E
   
<span style="color:#75715e"># 下面是 KUBE-MARK-MASQ 的作用。</span>
-A KUBE-MARK-MASQ -j MARK --set-xmark 0x4000/0x4000
</code></pre></div><p>发现规则都在，没有问题。但是 svc 都访问不到。IPVS 可能有帮助？？？</p>
</li>
<li>
<p>但是发现在 pod 的那个 node 上可以访问到 svc。使用 nodeSelector 转移到 master node. 也可以访问到了。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>root@bowser1704 cert-manager<span style="color:#f92672">]</span><span style="color:#75715e"># kubectl get svc -n cert-manager</span>
NAME                   TYPE        CLUSTER-IP      EXTERNAL-IP   PORT<span style="color:#f92672">(</span>S<span style="color:#f92672">)</span>    AGE
cert-manager           ClusterIP   10.43.157.248   &lt;none&gt;        9402/TCP   20h
cert-manager-webhook   ClusterIP   10.43.247.15    &lt;none&gt;        443/TCP    20h
   
<span style="color:#75715e"># can&#39;t access</span>
<span style="color:#f92672">[</span>root@bowser1704 cert-manager<span style="color:#f92672">]</span><span style="color:#75715e"># curl -k https://10.43.247.15:443</span>
^C
   
<span style="color:#75715e"># check node</span>
<span style="color:#f92672">[</span>root@bowser1704 cert-manager<span style="color:#f92672">]</span><span style="color:#75715e"># kubectl describe pods cert-manager-webhook-7c6c464d7b-vp44p -n cert-manage</span>
   
 ...
Node:         foo1/172.19.145.208
...
</code></pre></div><p>使用 nodeSelector 将 pod 迁移到 master node.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># edit pod yaml</span>
nodeSelector:
 k3s.io/internal-ip: 172.16.219.51
      
<span style="color:#f92672">[</span>root@bowser1704 cert-manager<span style="color:#f92672">]</span><span style="color:#75715e"># kubectl describe pods cert-manager-webhook-7c6c464d7b-vp44p -n cert-manage</span>
   
...
Node:         bowser1704/172.19.145.188
...
      
<span style="color:#75715e"># accessing in master node</span>
<span style="color:#f92672">[</span>root@bowser1704 cert-manager<span style="color:#f92672">]</span><span style="color:#75715e"># curl -k https://10.43.247.15:443</span>
<span style="color:#ae81ff">404</span> page not found
</code></pre></div><ol start="4">
<li>提 <a href="https://github.com/rancher/k3s/issues/1958">issue</a></li>
</ol>
</li>
</ol>
<hr>
<p>参考链接</p>
<ol>
<li><a href="https://community.hetzner.com/tutorials/howto-k8s-traefik-certmanager">https://community.hetzner.com/tutorials/howto-k8s-traefik-certmanager</a></li>
</ol>

    </div>
</article>

        </main>
    </div><footer class="flex justify-center">
    <div class="copyright mx-auto my-8">
        <p>
            © 2018-2020 <a href="https://github.com/Bowser1704">Bowser1704</a> - <strong><a href="https://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC 4.0</a></strong> - <strong>Power By Hugo | Theme By hugo-w2ng</strong>
        </p>
        
    </div>
</footer>



<script src="//instant.page/3.0.0" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script></body>

</html>