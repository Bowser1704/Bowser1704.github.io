<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>notes on Bowser</title><link>https://bowser1704.github.io/note/</link><description>Recent content in notes on Bowser</description><generator>Hugo -- gohugo.io</generator><language>zh-CN</language><lastBuildDate>Fri, 01 Nov 2019 14:50:23 +0800</lastBuildDate><atom:link href="https://bowser1704.github.io/note/index.xml" rel="self" type="application/rss+xml"/><item><title>《天气之子》反映的人生观</title><link>https://bowser1704.github.io/blog/2019/11/02/%E5%A4%A9%E6%B0%94%E4%B9%8B%E5%AD%90%E5%8F%8D%E6%98%A0%E7%9A%84%E4%BA%BA%E7%94%9F%E8%A7%82/</link><pubDate>Sat, 02 Nov 2019 20:30:51 +0800</pubDate><guid>https://bowser1704.github.io/blog/2019/11/02/%E5%A4%A9%E6%B0%94%E4%B9%8B%E5%AD%90%E5%8F%8D%E6%98%A0%E7%9A%84%E4%BA%BA%E7%94%9F%E8%A7%82/</guid><description>
&lt;h2 id=&#34;电影中不断出现的-麦田里的守望者&#34;&gt;电影中不断出现的《麦田里的守望者》&lt;/h2&gt;
&lt;p&gt;开头就是一个麦田里的守望者的&lt;code&gt;特写镜头&lt;/code&gt;，就像霍尔顿一样，帆高也是离家出走，十分敏感，胆小，软弱，但是就是不愿意在家中待着，有一堆的理由，首先我认为这就是一个很感性的做法，这带来的后果很大，没有理性的去思考所做的事情会发生什么后果。&lt;/p&gt;
&lt;h3 id=&#34;小资情调的忧伤&#34;&gt;小资情调的忧伤&lt;/h3&gt;
&lt;p&gt;在生活水平一定发展之后，也就是小资产阶级就有了很多忧伤，也就是闲的蛋疼，他们感到平庸，世界的无理性，生命是没有意义的，所以他们想要逃跑，不停地逃跑，去一个没有人认识自己的地方，但其实如果去了另一个地方，还是会认识人，还是想要逃离，这是没有意义的逃离，就像霍尔顿一样最后还是回到家里，帆高也是回到家里，无论怎么逃，你所做的事情，其实没有意义，只是给更多人带来更多的麻烦。&lt;/p&gt;
&lt;p&gt;片中提到很多次，圭介和帆高很相似，对，他们其实就是一个少年，一个中年而已，但是表示出来了，都是离家出走，中年的圭介已经妥协了，不愿意麻烦别人，不愿意被别人麻烦，不再是一个感性的存在（但是片子最后他还是感性了），而少年的帆高，无论发生多大的事情，闯了多大的祸，依旧，依旧是没有后悔，没有紧张，当然这是片子刻意不去表现出来正常人的反应，也正是这样，感性的存在深刻的表现出来，也正是许多二次元爱好者的生活态度。&lt;/p&gt;
&lt;p&gt;许多人，中间比较突出的是很多二次元爱好者，家庭生活条件优越，但是可能会有家庭不完整的情况，她们尤其爱这中生活态度，对事物感到忧伤，很容易忧郁，并且喜欢把这种态度宣扬出去，告诉别人自己的状态，我认为这种态度是不正常的，或者说是幼稚的，你小时候17,8岁时候这样我都可以理解，但是如果你长大了，你认为你自己长大了，请不要再去宣扬你这种想法了，你可以忧郁，可以悲伤，但是满世界说你的悲伤是为了什么呢？你要做的还是得做，你的工作还是要完成，既然是生活，都是为了死亡，过程要完整。&lt;/p&gt;
&lt;h2 id=&#34;天气&#34;&gt;天气&lt;/h2&gt;
&lt;p&gt;天气在这里很重要，阳菜可以改变天气，让世界更美好，让人们更加开心，父亲可以带生病的孩子快乐游玩，商家可以卖更多货物&amp;hellip;&amp;hellip;..，总有那么些人会让世界更美好，有更多的欢声笑语，让本来到处逃跑的帆高，开始向往生活，开始认真的面对这个世界，似乎不再那么软弱了，想起葛优在《不见不散》中说的，这可能就是==爱情的力量吧==，圭介也变得更加好，接回了女儿，影片的结尾，他似乎过上了更好的生活，一切都是那么美好，看上去很融洽，大团圆结局。&lt;/p&gt;
&lt;p&gt;但是在这种美好中，带有那么一丝丝的悲伤，这或许就是小资产阶级的忧伤吧，东京成了一个海，或许他以前是那样的，但是让他变回去又付出了多大的代价呢，但是如果牺牲阳菜的话，情况又是怎么样呢，毕竟世界是那么肮脏，如果人们知道阳菜能改变这些，那他也许会被强迫牺牲吧。&lt;/p&gt;
&lt;p&gt;另外，天气，晴天，就比雨天好吗？&lt;/p&gt;
&lt;p&gt;下起了雨，你感到冷吗？&lt;/p&gt;
&lt;h2 id=&#34;所以为的爱情&#34;&gt;所以为的爱情&lt;/h2&gt;
&lt;p&gt;很多女生喜欢这种爱情，彼此之间，无所畏惧，帆高为了阳菜义无反顾，无所畏惧，看上去很美，看上去很感人的，这就是感性，帆高似乎最后得到了爱情，阳菜过上了幸福的生活，我所认为的不是，阳菜必须要牺牲自己，为了大家，为了世界，没必要，每个人都是一个个体，独立的个体，我们要做的是，不去麻烦别人，但是也不用被别人麻烦，甚至是贡献生命，我所以为的爱情没有这种轰轰烈烈，万物瞩目，平平淡淡其实才是最真的，不用打扰谁，如果你们有爱情，那就在一起，仅此，而已。&lt;/p&gt;
&lt;h2 id=&#34;写在最后&#34;&gt;写在最后&lt;/h2&gt;
&lt;p&gt;其实这是一篇带有反思的文字，我想不明白，为什么我会那样忧郁，悲观，我是农村人，没有优越的生活环境，小县城没有星巴克，生活中没有耐克阿迪，总是感受那些莫名的忧伤，奇怪了，事情变得复杂了，以前喜欢到处宣扬自己的那种忧伤，但是后来慢慢发现，这是很错误的，其实就是渴望被人发现自己，把丧看作是很好的文化，现在丧文化越来越流行，也让我更多的反思自己，自己到底是在做什么，在想什么？&lt;/p&gt;
&lt;p&gt;过度的随性所欲，过度的丧，都是十分感性的表现，如果要to be better，请保持理性。&lt;/p&gt;
&lt;h3 id=&#34;离&#34;&gt;离&lt;/h3&gt;
&lt;p&gt;很多年我没有见到你，我没有在想你，&lt;/p&gt;
&lt;p&gt;只是隐约记得，你的头发还是短的，你的脚步还是乱的，&lt;/p&gt;
&lt;p&gt;我们最后还是没有去看山，山还是山，你还是你。&lt;/p&gt;</description></item><item><title>利用systemd管理nginx.service</title><link>https://bowser1704.github.io/note/2019/11/01/%E5%88%A9%E7%94%A8systemd%E7%AE%A1%E7%90%86nginx.service/</link><pubDate>Fri, 01 Nov 2019 14:50:23 +0800</pubDate><guid>https://bowser1704.github.io/note/2019/11/01/%E5%88%A9%E7%94%A8systemd%E7%AE%A1%E7%90%86nginx.service/</guid><description>
&lt;h2 id=&#34;systemd是什么&#34;&gt;systemd是什么&lt;/h2&gt;
&lt;p&gt;以前的Linux系统启动，首先会启动一个init.d，然后其他所有的进程都是这个进程的子进程，但是现在的改进，启用systemd来启动管理daemon进程，不过据说有一堆的bug、&lt;/p&gt;
&lt;p&gt;systemd具有一系列的命令，但是我只讲systemctl。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;systemctl start nginx.service
systemctl stop nginx.service
systemctl restart nginx.service&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;字面意思。&lt;/p&gt;
&lt;h2 id=&#34;如何让systemd托管我们的service&#34;&gt;如何让systemd托管我们的service&lt;/h2&gt;
&lt;p&gt;linux下一切皆文件，systemd也是靠读取一些指定的文件来管理的，我的系统service文件在&lt;code&gt;lib/systemd/system&lt;/code&gt;下面，你可以自己去找一下，locate命令就可以。&lt;/p&gt;
&lt;p&gt;而service长什么样子呢？以nginx.service为例子&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;Unit&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;span class=&#34;nv&#34;&gt;Description&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;nginx - high performance web server.
&lt;span class=&#34;nv&#34;&gt;Documentation&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;http://nginx.org/en/docs/
&lt;span class=&#34;nv&#34;&gt;After&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;network.target remote-fs.target nss-lookup.target
&lt;span class=&#34;c1&#34;&gt;# 这里是一些描述信息，不是特别重要&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;Service&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;span class=&#34;nv&#34;&gt;Type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;forking
&lt;span class=&#34;nv&#34;&gt;PIDFile&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/run/nginx.pid &lt;span class=&#34;c1&#34;&gt;#pid文件的位置&lt;/span&gt;
&lt;span class=&#34;nv&#34;&gt;ExecStartPre&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/usr/local/nginx/sbin/nginx -t -c /usr/local/nginx/conf/nginx.conf &lt;span class=&#34;c1&#34;&gt;#启动前的命令一般都是test，其实就是nginx的命令&lt;/span&gt;
&lt;span class=&#34;nv&#34;&gt;ExecStart&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf &lt;span class=&#34;c1&#34;&gt;#启动命令，使用绝对路劲。&lt;/span&gt;
&lt;span class=&#34;nv&#34;&gt;ExecReload&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/usr/local/nginx/sbin/nginx -s reopen
&lt;span class=&#34;nv&#34;&gt;ExecStop&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/usr/local/nginx/sbin/nginx -s stop
&lt;span class=&#34;nv&#34;&gt;PrivateTmp&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;Install&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;span class=&#34;nv&#34;&gt;WantedBy&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;multi-user.target
&lt;span class=&#34;c1&#34;&gt;# 放入multi-user.target目录下面&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&#34;nginx配置&#34;&gt;nginx配置&lt;/h2&gt;
&lt;p&gt;我们在安装nginx的时候，如果是默认包管理器安装的话，会自动加入systemd，但是我们自己安装就会有一堆问题。所以conf配置添加一句。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;pid /run/nginx.pid
&lt;span class=&#34;c1&#34;&gt;# pid /var/run/nginx.pid&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;# /var/run其实是一个指向/run的软连接。&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&#34;可能会遇到的问题&#34;&gt;可能会遇到的问题&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;nginx 找不到nginx.pid，那你就自己去创建一个nginx.pid。&lt;/li&gt;
&lt;/ol&gt;</description></item><item><title>短链接的实现</title><link>https://bowser1704.github.io/blog/2019/10/31/%E7%9F%AD%E9%93%BE%E6%8E%A5%E7%9A%84%E5%AE%9E%E7%8E%B0/</link><pubDate>Thu, 31 Oct 2019 23:57:33 +0800</pubDate><guid>https://bowser1704.github.io/blog/2019/10/31/%E7%9F%AD%E9%93%BE%E6%8E%A5%E7%9A%84%E5%AE%9E%E7%8E%B0/</guid><description>
&lt;h2 id=&#34;什么是短链接&#34;&gt;什么是短链接&lt;/h2&gt;
&lt;p&gt;就是你经常在手机短信，或者微博上看到的URL，都是很短的并且像t.cn这种开头的，限制字数，短信发送按字数收费，微博限制回复长度等等。&lt;/p&gt;
&lt;h2 id=&#34;首先大概的实现思路&#34;&gt;首先大概的实现思路&lt;/h2&gt;
&lt;p&gt;知乎上有很多回答，典型的错误回答有&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;用MD5等hash直接得出定长字符，没有考虑冲突的情况，在这种情况下冲突是很严重的，不可以忍受的。&lt;/li&gt;
&lt;li&gt;自己&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;正确的实现方法是，利用进制转化，也就是低进制转换为高进制，数的长度会变得很小，例如1000(2) = 8(10)，一下子就去掉了三位。&lt;/p&gt;
&lt;p&gt;所以给每个长url一个自增10进制id，然后用10进制id转换为62进制，为什么62进制呢？因为10个阿拉伯数字+26×2个英文字母，共62位，这样的话，6位62进制数字也就有了500多亿个，也够用了。&lt;/p&gt;
&lt;h2 id=&#34;长链每次返回的都是同一个短链怎么实现的呢&#34;&gt;长链每次返回的都是同一个短链怎么实现的呢？&lt;/h2&gt;
&lt;p&gt;比较好的方法，建立一个hash-table，存在redis里面很好，长链作为key，短链作为value，并且设置一个过期时间，如果有人再次同一长链转为短链，则返回原来短链，并且把过期时间变长等等。&lt;/p&gt;
&lt;h2 id=&#34;使用短链接过程&#34;&gt;使用短链接过程&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;向dns请求短链服务的ip，并访问。&lt;/li&gt;
&lt;li&gt;短链接直接返回302/301 重定向到你自己的url&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;PS：302/301都为重定向&lt;/p&gt;
&lt;p&gt;301 redirect: 301 代表永久性转移(Permanently Moved)
302 redirect: 302 代表暂时性转移(Temporarily Moved )&lt;/p&gt;
&lt;p&gt;我认为这里我们是要返回301的也就是永久重定向，因为我们不会再回去访问短链服务了&lt;/p&gt;
&lt;p&gt;但是301的话无法统计这个短链接被访问的时候次数，也就是不能看到这个数据，但其实还是很有用的。所以很多情况还是使用302的。&lt;/p&gt;
&lt;/blockquote&gt;</description></item><item><title>谈谈系统启动发生了什么</title><link>https://bowser1704.github.io/blog/2019/08/22/%E8%B0%88%E8%B0%88%E7%B3%BB%E7%BB%9F%E5%90%AF%E5%8A%A8%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/</link><pubDate>Thu, 22 Aug 2019 16:23:18 +0800</pubDate><guid>https://bowser1704.github.io/blog/2019/08/22/%E8%B0%88%E8%B0%88%E7%B3%BB%E7%BB%9F%E5%90%AF%E5%8A%A8%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/</guid><description>&lt;p&gt;系统启动实际上东西比较多，这里只是讲一讲，系统引导方面的东西。&lt;/p&gt;
&lt;h3 id=&#34;0-杂谈&#34;&gt;0. 杂谈&lt;/h3&gt;
&lt;p&gt;首先我们知道在系统中启动叫做&lt;code&gt;boot&lt;/code&gt;，取自Bootstrap，这里有个小故事&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Bootstrap不是鞋带的意思，应该是“鞋子背带”的意思（&lt;a href=&#34;http://en.wiktionary.org/wiki/bootstrap）&#34;&gt;http://en.wiktionary.org/wiki/bootstrap）&lt;/a&gt;
在这里隐喻表示一种不需要外部帮助自己能够处理事情的情形。“pull oneself up by one&amp;rsquo;s bootstraps”最初来自于《The Surprising Adventures of Baron Munchausen》这本书里的一个故事：主人公Baron Munchausen不小心掉进了一片沼泽，他通过自己的bootstraps将自己拉了出来（当然有童话神奇的色彩）。事实上在19世纪初美国就有&amp;rdquo;pull oneself over a fence by one&amp;rsquo;s bootstraps&amp;rdquo;的语言，意思是“做荒谬不可能完成的事情”。
参考：&lt;a href=&#34;http://en.wikipedia.org/wiki/Bootstrapping&#34;&gt;http://en.wikipedia.org/wiki/Bootstrapping&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;为什么说这个故事呢，我们要启动系统，就要启动程序对吧，但是启动程序又要系统，这不就是一个死循环了吗？所以&lt;code&gt;一种不需要外部帮助自己能够处理事情的情形&lt;/code&gt;，在当时ROM（Read only memory）的发展下，人们刚开始发明了BIOS（Basic Input/Output System），后来又出现了&lt;code&gt;UEFI&lt;/code&gt;全称“统一的可扩展固件接口”(Unified Extensible Firmware Interface)。&lt;/p&gt;
&lt;h3 id=&#34;1-最开始是如何加载系统的&#34;&gt;1. 最开始是如何加载系统的&lt;/h3&gt;
&lt;h4 id=&#34;1-1-老一代的legacy-bios-mbr&#34;&gt;1.1 老一代的Legacy BIOS + &lt;code&gt;MBR&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;最初的启动就是按下电源键之后，电脑读取写入ROM的BIOS。BIOS开始下面几个步骤。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;硬件自检（Power-On Self-Test）简称为 POST，如果有问题计算机会发出不同含义的蜂鸣声。（有没有很傻屌）&lt;/li&gt;
&lt;li&gt;选择启动顺序，现在BIOS开始要运行的权利给下一个device了，但是你电脑可能有多个硬盘，也可能你会插入U盘，所以可能需要你选择一个设备。
&lt;ul&gt;
&lt;li&gt;计算机开始读取设备的第一个扇区，也就是512字节，就叫做&amp;rdquo;主引导记录&amp;rdquo;（Master boot record，缩写为&lt;code&gt;MBR&lt;/code&gt;）。&lt;/li&gt;
&lt;li&gt;但是&lt;code&gt;MBR&lt;/code&gt;有一些问题，所以现在基本不用了。&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;从硬盘启动，加载系统内核相关的东西。
&lt;ul&gt;
&lt;li&gt;这里因为&lt;code&gt;MBR&lt;/code&gt;，所以系统启动读取的是&lt;code&gt;MBR&lt;/code&gt;内的启动程序，但是如果你一个硬盘，装了很多的系统，每次装新的系统，后面的启动代码就会覆盖前者的。&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;总结的话&lt;code&gt;BIOS&lt;/code&gt;不认识设备，直接硬的来，你的&lt;code&gt;MBR&lt;/code&gt;内写了什么，他就是什么。&lt;/p&gt;
&lt;h4 id=&#34;1-2-进入linux系统之后initd&#34;&gt;1.2 进入Linux系统之后initd&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;加载内核，进入&lt;code&gt;/boot&lt;/code&gt;下找到内核文件，加载。&lt;/li&gt;
&lt;li&gt;开始运行初始化文件&lt;code&gt;/sbin/init&lt;/code&gt;，他的作用是初始化系统环境，&lt;code&gt;init&lt;/code&gt;就是第一个进程，&lt;code&gt;pid&lt;/code&gt;=1&lt;/li&gt;
&lt;li&gt;确定运行级别&lt;/li&gt;
&lt;li&gt;加载开机启动程序&lt;/li&gt;
&lt;li&gt;用户登录&lt;/li&gt;
&lt;li&gt;进入login shell&lt;/li&gt;
&lt;li&gt;打开 non-login shell&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;这里初略讲，详情看阮一峰的文章。&lt;/p&gt;
&lt;p&gt;阮一峰写了两篇文章对于以前的启动方式很好的讲解了&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://www.ruanyifeng.com/blog/2013/02/booting.html&#34;&gt;http://www.ruanyifeng.com/blog/2013/02/booting.html&lt;/a&gt; 参考文章，作者阮一峰，对于&lt;code&gt;MBR&lt;/code&gt;的详细解释&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://www.ruanyifeng.com/blog/2013/08/linux_boot_process.html&#34;&gt;http://www.ruanyifeng.com/blog/2013/08/linux_boot_process.html&lt;/a&gt; 参考文章，作者阮一峰，对于&lt;code&gt;Linux&lt;/code&gt;内核启动的解释。&lt;/p&gt;
&lt;h3 id=&#34;2-今天我们怎么加载系统&#34;&gt;2. 今天我们怎么加载系统&lt;/h3&gt;
&lt;h4 id=&#34;2-1-新时代的-uefi-bios-gpt&#34;&gt;2.1 新时代的&lt;code&gt;UEFI BIOS&lt;/code&gt;+&lt;code&gt;GPT&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;UEFI&lt;/code&gt;不同于legacy BIOS的是，他认识设备，他会在&lt;code&gt;/boot/efi&lt;/code&gt;寻找以&lt;code&gt;.efi&lt;/code&gt;为后缀的文件，里面有一个目录&lt;code&gt;EFI&lt;/code&gt;，放了各种系统的&lt;code&gt;efi&lt;/code&gt;启动程序。&lt;/p&gt;
&lt;p&gt;例如（不同厂商的驱动放在不同厂家的文件夹下面）&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;启动windows 进入Microsoft/Boot/*.efi&lt;/p&gt;
&lt;p&gt;启动&lt;code&gt;ubuntu&lt;/code&gt; 进入ubuntu/*.efi&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&#34;https://upload-images.jianshu.io/upload_images/4072641-4b58e0e13c209d14.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/345/format/webp&#34; alt=&#34;efi&#34; /&gt;&lt;/p&gt;
&lt;h5 id=&#34;流程&#34;&gt;流程&lt;/h5&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;POST，硬件自检&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;UEFI&lt;/code&gt;固件加载，一系列初始化。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;按照设置里面的顺序，读取&lt;code&gt;efi&lt;/code&gt;启动项，加载硬件驱动，解析其中的分区表（GPT和MBR）。&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;启动项分为两种&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;文件启动项，即&lt;code&gt;UEFI&lt;/code&gt;已经记录了启动项的地址，某个磁盘-&amp;gt;某个分区-&amp;gt;/&lt;code&gt;EFI/Boot/*.efi&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;设备启动项，就是磁盘，会直接去磁盘里面寻找&lt;code&gt;ESP&lt;/code&gt;分区下的&lt;code&gt;/EFI/Boot/*.efi&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;随着Windows8.x，以及UEFI标准2.x，win推出了一个叫做SecureBoot的功能。开了SecureBoot之后，主板会验证即将加载的efi文件的签名，如果开发者不是受信任的开发者，就会拒绝加载。
比如CloverX64.efi就好像没有签名。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;所以在装Linux的时候我们会关闭SecureBoot，防止不被授权，无法加载efi&lt;/p&gt;
&lt;h5 id=&#34;磁盘分区-文件系统&#34;&gt;磁盘分区，文件系统&lt;/h5&gt;
&lt;p&gt;磁盘就是我们用的硬盘，U盘之类的，我们要对磁盘进行分区，其实不分区可以理解为只分一个区，然后每个区要进行格式化，并且选择文件系统。不同类型磁盘有不同类型的设备驱动，不同系统有不同的文件系统驱动。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;磁盘驱动
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;win8/10&lt;/code&gt;含有&lt;code&gt;IDE/SATA/NVME&lt;/code&gt;三种驱动&lt;/li&gt;
&lt;li&gt;&lt;code&gt;macos&lt;/code&gt;含有&lt;code&gt;/SATA/NVME&lt;/code&gt;驱动，但是10.13之前是苹果专用&lt;code&gt;NVME&lt;/code&gt;驱动&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;文件系统驱动
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;win10&lt;/code&gt;含有FAT32、NTFS、exFAT、ReFS几种&lt;/li&gt;
&lt;li&gt;Linux含有ext2、ext3、ext4、FAT32等&lt;/li&gt;
&lt;li&gt;macOS含有FAT32、HFS+、APFS、exFAT，NTFS只读&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;驱动是可以后期安装的，Paragon这个公司推出了NTFS for Mac、HFS for Windows、ExtFS for……等一套文件系统驱动。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h5 id=&#34;总结&#34;&gt;总结&lt;/h5&gt;
&lt;p&gt;UEFI规范里，在GPT分区表的基础上，规定了一个EFI系统分区（EFI System Partition，ESP），ESP要格式化成FAT32，EFI启动文件要放在“/EFI&amp;lt;厂商&amp;gt;”文件夹下面。&lt;strong&gt;但是Apple比较特殊&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;作为UEFI标准里，钦定的文件系统，FAT32.efi是每个主板都会带的。所有UEFI的主板都认识FAT32分区。这就是为啥非得是FAT32的。&lt;/p&gt;
&lt;p&gt;至于GPT（GUID Partition Table，缩写：GPT），可以理解为新时代的&lt;code&gt;MBR&lt;/code&gt;，分区表。&lt;/p&gt;
&lt;p&gt;所以说&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;装系统可以不用制作启动盘了，将iso文件压缩到一个FAT32分区内，&lt;del&gt;然后在将该分区下的&lt;code&gt;EFI/Boot/BOOTx64&lt;/code&gt;添加到UEFI文件启动项&lt;/del&gt;，直接进入UEFI引导，就可以选择这一项启动。&lt;/p&gt;
&lt;p&gt;另外UEFI为了兼容MBR，是可以用的，但是Lgacy不支持GPT&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;2-2-systemd启动系统&#34;&gt;2.2 Systemd启动系统&lt;/h4&gt;
&lt;p&gt;init启动系统有几点不好&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;串行启动，启动时间长&lt;/li&gt;
&lt;li&gt;启动脚本复杂&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Systemd是用来替代init启动而生的，读作 System daemon（系统，守护进程）。&lt;/p&gt;
&lt;p&gt;Systemd是一组命令，涉及到系统管理的方方面面，本来我们启动系统是用initd初始化一个pid=1的进程，然后所有进程都是他的子进程，但是现在的话我们不需要，直接启动Systemd，用它来管理系统。&lt;/p&gt;
&lt;p&gt;这个时候就和上面类似了。但是我们要重点关注&lt;code&gt;systemd&lt;/code&gt;命令组。这里就会体现Linux下一切皆文件的思想。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://ccnupp.oss-cn-shanghai.aliyuncs.com/%E6%9C%AA%E5%91%BD%E5%90%8D%E6%96%87%E4%BB%B6.svg&#34; alt=&#34;未命名文件&#34; /&gt;&lt;/p&gt;
&lt;h4 id=&#34;这里还要提一点-系统进入之后&#34;&gt;这里还要提一点，系统进入之后&lt;/h4&gt;
&lt;p&gt;首先我们会进入login shell，这个时候会读取一些配置文件。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#命令行登录&lt;/span&gt;
~/.bash_profile
~/.bash_login
~/.profile &lt;span class=&#34;c1&#34;&gt;#这里有语句会同时执行.bashrc&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;#只要读取了上面一个，就不会再读取后面的了，按上述顺序读取。&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;#图形界面登录的话,只会读取下面两个，不管是否有.bash_profile存在&lt;/span&gt;
etc/ptofile &lt;span class=&#34;c1&#34;&gt;#这个是对于所有用户的配置文件，~/.bashrc是对于当前用户的。&lt;/span&gt;
~/.profile&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;然后我们手动开启的shell叫做non login shell，他就会读取.bashrc&lt;/p&gt;
&lt;h3 id=&#34;参考文章&#34;&gt;参考文章&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://www.ibm.com/developerworks/cn/linux/l-lpic1-101-2/index.html&#34;&gt;https://www.ibm.com/developerworks/cn/linux/l-lpic1-101-2/index.html&lt;/a&gt; IBM，引导系统&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://www.ruanyifeng.com/blog/2013/02/booting.html&#34;&gt;http://www.ruanyifeng.com/blog/2013/02/booting.html&lt;/a&gt; 参考文章，作者阮一峰，对于MBR的详细解释&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://www.ruanyifeng.com/blog/2013/08/linux_boot_process.html&#34;&gt;http://www.ruanyifeng.com/blog/2013/08/linux_boot_process.html&lt;/a&gt; 参考文章，作者阮一峰，对于Linux内核启动的解释。&lt;/p&gt;
&lt;p&gt;关于systemd使用，这里有几篇文章。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html&#34;&gt;http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html&lt;/a&gt; 作者：阮一峰&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-part-two.html&#34;&gt;http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-part-two.html&lt;/a&gt; 作者：阮一峰&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://wiki.archlinux.org/index.php/Systemd_(简体中文)&#34;&gt;https://wiki.archlinux.org/index.php/Systemd_&lt;/a&gt; 来源Archwiki&lt;/p&gt;</description></item><item><title>关于</title><link>https://bowser1704.github.io/about/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://bowser1704.github.io/about/</guid><description>
&lt;h2 id=&#34;关于我自己&#34;&gt;关于我自己&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;一个还在读本科的垃圾cser。&lt;/li&gt;
&lt;li&gt;我喜欢看电影，看书，但是没有影评，也没有书评，对的我就是这么垃圾，混混pt站。&lt;/li&gt;
&lt;li&gt;喜欢读诗，读的难听，写的难看。&lt;/li&gt;
&lt;li&gt;对政治，没有明确观点，&lt;/li&gt;
&lt;li&gt;“厌恶”感性，保持理性，人生是十分短暂的，世界也不是那么的美好，感性会让这个世界变得更加混乱，没有正常的逻辑，并且那对于其他人是很不公平的，说白了就是我厌恶十分感性的人，让事情变得复杂起来，所以对一切事物都要保持理性，实际上人类都很垃圾，都很失败。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;我的邮箱是&lt;a href=&#34;#&#34; class=&#34;cryptedmail&#34;
data-name=&#34;bowser1704&#34;
data-domain=&#34;icloud&#34;
data-tld=&#34;com&#34;
onclick=&#34;window.location.href = &#39;mailto:&#39; + this.dataset.name + &#39;@&#39; + this.dataset.domain + &#39;.&#39; + this.dataset.tld; return false;&#34;&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&#34;写作原则&#34;&gt;写作原则&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;不抄袭，不复制粘贴，不炒冷饭，不写已经有很好的文章的东西。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;尽量避免废话，精简。😈&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item></channel></rss>